{"version":3,"file":"5-searchImage.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/5-searchImage.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '53324015-4659ca59c2f407a377d78da87'; \n\nexport default function getImagesByQuery(query) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n    return axios.get(`${BASE_URL}?${params}`);\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loaderContainerRef = document.querySelector('.loader-container'); \n\n\nexport function createGallery(images) {\n  gallery.innerHTML = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n  <a class=\"item-link\" href=\"${largeImageURL}\">\n    <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    <ul class=\"statistic-list\">\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Likes</p>\n        <p class=\"statistic-value\">${likes}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Views</p>\n        <p class=\"statistic-value\">${views}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Comments</p>\n        <p class=\"statistic-value\">${comments}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Downloads</p>\n        <p class=\"statistic-value\">${downloads}</p>\n      </li>\n    </ul></a\n  >\n</li>`\n    )\n    .join('');\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n    if (loaderContainerRef) {\n        loaderContainerRef.classList.remove('is-hidden'); \n    }\n}\n\nexport function hideLoader() {\n    if (loaderContainerRef) {\n        loaderContainerRef.classList.add('is-hidden'); \n    }\n}\n\nexport function createLightBox() {\n  let galleryLightBox = new SimpleLightbox('.gallery li a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  galleryLightBox.refresh();\n}\n\n\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from \"./pixabay-api\";\n\nimport { createGallery, clearGallery, showLoader, hideLoader, createLightBox } from \"./render-functions\";\n\nconst refs = {\n    searchForm: document.querySelector('.form'),\n    gallery: document.querySelector('.gallery'),\n}\n\nconst errorEmptyInput = {\n    message: 'Search field cannot be empty. Please enter your request.',\n    backgroundColor: '#ff9900',\n    messageColor: '#ffffff',\n    position: 'topRight',\n};\n\nconst errorMessage = {\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    backgroundColor: '#B51B1B',\n    messageColor: '#ffffff',\n    position: 'topRight',\n};\n\nconst errorServerConnection = {\n    title: 'ERROR',\n    titleColor: '#ffffff',\n    message: 'Error connecting to server',\n    messageColor: '#ffffff',\n    backgroundColor: '#B51B1B',\n    position: 'topRight',\n};\n\nrefs.searchForm.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(e) {\n    e.preventDefault();\n\n    clearGallery();\n\n    const usersRequest = refs.searchForm.elements['search-text'].value.trim();\n\n    if (!emptyInputCheck(usersRequest)) {\n        refs.searchForm.reset();\n        return;\n    }\n\n    showLoader();\n\n    getImagesByQuery(usersRequest)\n        .then(response => {\n            const array = response.data.hits;\n            \n            if (!checkInput(array)) {\n                return;\n            }\n            \n            hideLoader();\n            createGallery(array);\n            createLightBox();\n        })\n        .catch(error => {\n            console.log(\"Server Error:\", error.message);\n            hideLoader();\n            iziToast.show(errorServerConnection);\n        })\n        .finally(() => {\n            refs.searchForm.reset();\n        });\n}\n\nfunction emptyInputCheck(usersRequest) {\n    if (!usersRequest) {\n        iziToast.show(errorEmptyInput); \n        return false;\n    }\n    return true; \n}\n\nfunction checkInput(array) {\n    if (!array.length) {\n        iziToast.show(errorMessage); \n        clearGallery();\n        hideLoader();\n        return false;\n    }\n    return true;\n}\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","params","axios","gallery","loaderContainerRef","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","createLightBox","SimpleLightbox","refs","errorEmptyInput","errorMessage","errorServerConnection","handleSubmit","usersRequest","emptyInputCheck","response","array","checkInput","error","iziToast"],"mappings":"sJAEA,MAAMA,EAAW,2BACXC,EAAU,qCAED,SAASC,EAAiBC,EAAO,CAC5C,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EACD,OAAOE,EAAM,IAAI,GAAGL,CAAQ,IAAII,CAAM,EAAE,CAC5C,CCXA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAqB,SAAS,cAAc,mBAAmB,EAG9D,SAASC,EAAcC,EAAQ,CACpCH,EAAQ,UAAYG,EACjB,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,+BACmBL,CAAa;AAAA,4BAChBD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,qCAIjBC,CAAK;AAAA;AAAA;AAAA;AAAA,qCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,qCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,qCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,MAKzC,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,GAAe,CAC7BX,EAAQ,UAAY,EACtB,CAEO,SAASY,GAAa,CACrBX,GACAA,EAAmB,UAAU,OAAO,WAAW,CAEvD,CAEO,SAASY,GAAa,CACrBZ,GACAA,EAAmB,UAAU,IAAI,WAAW,CAEpD,CAEO,SAASa,GAAiB,CACT,IAAIC,EAAe,gBAAiB,CACxD,aAAc,MACd,aAAc,GAClB,CAAG,EACe,QAAO,CACzB,CC5DA,MAAMC,EAAO,CACT,WAAY,SAAS,cAAc,OAAO,EAC1C,QAAS,SAAS,cAAc,UAAU,CAC9C,EAEMC,EAAkB,CACpB,QAAS,2DACT,gBAAiB,UACjB,aAAc,UACd,SAAU,UACd,EAEMC,EAAe,CACjB,QAAS,2EACT,gBAAiB,UACjB,aAAc,UACd,SAAU,UACd,EAEMC,EAAwB,CAC1B,MAAO,QACP,WAAY,UACZ,QAAS,6BACT,aAAc,UACd,gBAAiB,UACjB,SAAU,UACd,EAEAH,EAAK,WAAW,iBAAiB,SAAUI,CAAY,EAEvD,SAASA,EAAa,EAAG,CACrB,EAAE,eAAc,EAEhBT,IAEA,MAAMU,EAAeL,EAAK,WAAW,SAAS,aAAa,EAAE,MAAM,OAEnE,GAAI,CAACM,EAAgBD,CAAY,EAAG,CAChCL,EAAK,WAAW,QAChB,MACH,CAEDJ,IAEAhB,EAAiByB,CAAY,EACxB,KAAKE,GAAY,CACd,MAAMC,EAAQD,EAAS,KAAK,KAEvBE,EAAWD,CAAK,IAIrBX,IACAX,EAAcsB,CAAK,EACnBV,IACZ,CAAS,EACA,MAAMY,GAAS,CACZ,QAAQ,IAAI,gBAAiBA,EAAM,OAAO,EAC1Cb,IACAc,EAAS,KAAKR,CAAqB,CAC/C,CAAS,EACA,QAAQ,IAAM,CACXH,EAAK,WAAW,OAC5B,CAAS,CACT,CAEA,SAASM,EAAgBD,EAAc,CACnC,OAAKA,EAIE,IAHHM,EAAS,KAAKV,CAAe,EACtB,GAGf,CAEA,SAASQ,EAAWD,EAAO,CACvB,OAAKA,EAAM,OAMJ,IALHG,EAAS,KAAKT,CAAY,EAC1BP,IACAE,IACO,GAGf"}